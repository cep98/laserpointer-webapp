<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Gyro Dump</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h2>Gyro Sender (Handy)</h2>
  <script>
    const socket = io();

    if (window.DeviceMotionEvent) {
      window.addEventListener('devicemotion', (event) => {
        const data = {
          acc: {
            x: event.acceleration.x,
            y: event.acceleration.y,
            z: event.acceleration.z
          },
          rotRate: {
            alpha: event.rotationRate?.alpha,
            beta: event.rotationRate?.beta,
            gamma: event.rotationRate?.gamma
          },
          interval: event.interval
        };
        console.log("Send:", data);
        socket.emit("sensorDump", data);
      });
    } else {
      alert("DeviceMotion not supported.");
    }
  </script>
</body>
</html>
