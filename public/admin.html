<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Admin Panel v3.10</title>
  <style>
    body { margin:0; padding:20px; background:#111; color:#fff; font-family:sans-serif }
    .setting { margin:12px 0 }
    label { display:inline-block; width:240px }
    input { width:100px; padding:4px }
    button { padding:8px 16px; background:#c33; color:#fff; border:none; cursor:pointer }
  </style>
</head>
<body>
  <h1>Admin Panel v3.10</h1>

  <div class="setting">
    <label for="maxH">Max. Winkel horizontal (°):</label>
    <input id="maxH" type="number" value="20" min="1" max="180"/>
  </div>
  <div class="setting">
    <label for="maxV">Max. Winkel vertikal (°):</label>
    <input id="maxV" type="number" value="20" min="1" max="180"/>
  </div>
  <div class="setting">
    <label for="minW">Min. Strichstärke (px):</label>
    <input id="minW" type="number" value="5" min="1" max="100"/>
  </div>
  <div class="setting">
    <label for="maxW">Max. Strichstärke (px):</label>
    <input id="maxW" type="number" value="12" min="1" max="200"/>
  </div>
  <div class="setting">
    <label for="smooth">Glättung (0–1):</label>
    <input id="smooth" type="number" step="0.01" value="0.15" min="0" max="1"/>
  </div>

  <button id="clear">Canvas löschen</button>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const sock   = io();
    const eMaxH  = document.getElementById("maxH");
    const eMaxV  = document.getElementById("maxV");
    const eMinW  = document.getElementById("minW");
    const eMaxW  = document.getElementById("maxW");
    const eSmooth= document.getElementById("smooth");
    const btnClr = document.getElementById("clear");

    sock.emit("identify",{ role:"admin", deviceId:null });

    function send() {
      const cfg = {
        maxH:   parseFloat(eMaxH.value),
        maxV:   parseFloat(eMaxV.value),
        minW:   parseFloat(eMinW.value),
        maxW:   parseFloat(eMaxW.value),
        smooth: parseFloat(eSmooth.value)
      };
      sock.emit("updateSettings", cfg);
    }

    [eMaxH,eMaxV,eMinW,eMaxW,eSmooth].forEach(el =>
      el.addEventListener("change", send)
    );

    btnClr.addEventListener("click", () => sock.emit("clear"));

    // initial
    send();
  </script>
</body>
</html>
