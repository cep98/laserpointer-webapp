<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Admin Panel v3.9</title>
  <style>
    body { margin:0; padding:20px; background:#111; color:#fff; font-family:sans-serif }
    .setting { margin:15px 0 }
    label { display:inline-block; width:220px }
    input { width:100px }
    #clear { padding:8px 16px; background:#c33; border:none; color:#fff; cursor:pointer }
  </style>
</head>
<body>
  <h1>Admin Panel v3.9</h1>

  <div class="setting">
    <label for="maxH">Max. Winkel horizontal (°)</label>
    <input id="maxH" type="number" value="20" min="1" max="180"/>
  </div>
  <div class="setting">
    <label for="maxV">Max. Winkel vertikal (°)</label>
    <input id="maxV" type="number" value="20" min="1" max="180"/>
  </div>
  <div class="setting">
    <label for="minW">Min. Strichstärke (px)</label>
    <input id="minW" type="number" value="2" min="1" max="50"/>
  </div>
  <div class="setting">
    <label for="maxW">Max. Strichstärke (px)</label>
    <input id="maxW" type="number" value="12" min="1" max="100"/>
  </div>
  <div class="setting">
    <label for="smooth">Glättung (0–1, 0 = Maximalglättung)</label>
    <input id="smooth" type="number" step="0.01" min="0" max="1" value="0.15"/>
  </div>

  <button id="clear">Canvas löschen</button>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const sock  = io();
    const elMaxH = document.getElementById("maxH");
    const elMaxV = document.getElementById("maxV");
    const elMinW = document.getElementById("minW");
    const elMaxW = document.getElementById("maxW");
    const elSmooth = document.getElementById("smooth");
    const btnClear = document.getElementById("clear");

    sock.emit("identify",{ role:"admin", deviceId:null });

    function send() {
      const cfg = {
        maxH:   parseFloat(elMaxH.value),
        maxV:   parseFloat(elMaxV.value),
        minW:   parseFloat(elMinW.value),
        maxW:   parseFloat(elMaxW.value),
        smooth: parseFloat(elSmooth.value)
      };
      sock.emit("updateSettings", cfg);
    }

    [elMaxH, elMaxV, elMinW, elMaxW, elSmooth].forEach(el =>
      el.addEventListener("change", send)
    );

    btnClear.addEventListener("click", () => sock.emit("clear"));

    // initial
    send();
  </script>
</body>
</html>
