<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Admin-Panel</title>
  <style>
    body {
      background: #111; color: #eee;
      font-family: sans-serif; padding: 20px;
    }
    label, input {
      display: block; margin: 10px 0;
    }
    input[type=number], input[type=range] {
      width: 100%; max-width: 300px;
    }
    button {
      padding: 10px 20px; background: red;
      color: white; border:none; cursor:pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>Admin-Panel</h1>

  <label>Max. Winkel horizontal (°):
    <input type="number" id="horiz" value="20" />
  </label>

  <label>Max. Winkel vertikal (°):
    <input type="number" id="vert" value="20" />
  </label>

  <label>Glättung (%):
    <input type="range" id="smooth" min="0" max="100" value="15" />
  </label>

  <label>Minimale Strichstärke (px):
    <input type="number" id="minW" min="1" max="100" value="5" />
  </label>

  <label>Maximale Strichstärke (px):
    <input type="number" id="maxW" min="1" max="100" value="12" />
  </label>

  <button id="clear">Canvas löschen</button>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    function sendSettings() {
      const maxAlpha = parseFloat(document.getElementById("horiz").value);
      const maxBeta  = parseFloat(document.getElementById("vert").value);
      const smooth   = parseFloat(document.getElementById("smooth").value) / 100;
      const minW     = parseFloat(document.getElementById("minW").value);
      const maxW     = parseFloat(document.getElementById("maxW").value);

      socket.emit("admin-settings", {
        maxH: maxAlpha,
        maxV: maxBeta,
        smooth,
        minW,
        maxW
      });
    }

    document.getElementById("horiz").addEventListener("change", sendSettings);
    document.getElementById("vert").addEventListener ("change", sendSettings);
    document.getElementById("smooth").addEventListener("input", sendSettings);
    document.getElementById("minW").addEventListener("change", sendSettings);
    document.getElementById("maxW").addEventListener("change", sendSettings);

    document.getElementById("clear").addEventListener("click", () => {
      socket.emit("clear");
    });

    // einmal initial senden
    sendSettings();
  </script>
</body>
</html>
